<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PURE PORT - Universal Synthesis</title>
    <style>
        :root {
            --phi: 1.618;
            --navy: #001f3f;
            --gold: #D4AF37;
            --white: #ffffff;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--navy);
            color: var(--white);
            font-family: 'Times New Roman', serif;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            overflow: hidden;
        }

        .port-container {
            width: calc(100% / var(--phi));
            max-width: 600px;
            text-align: center;
        }

        h1 {
            color: var(--gold);
            font-size: calc(2rem / var(--phi));
            letter-spacing: 0.5rem;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
            transition: 0.5s ease;
        }

        input {
            width: 100%;
            padding: 1rem;
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--gold);
            color: var(--white);
            font-size: 1.2rem;
            text-align: center;
            outline: none;
            transition: 0.3s;
        }

        input:focus {
            border-bottom: 2px solid var(--white);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.2);
        }

        /* 34資産のグリッド：共鳴エフェクトを追加 */
        .assets-grid {
            position: absolute;
            bottom: calc(100vh / (var(--phi) * var(--phi) * var(--phi)));
            display: flex; gap: 1rem; opacity: 0.4; font-size: 0.8rem;
            flex-wrap: wrap; justify-content: center; width: 90%;
            transition: 0.5s;
        }

        .asset-item {
            transition: all 0.5s ease;
            padding: 2px 5px;
        }

        /* 【共鳴状態】黄金の輝き */
        .resonate {
            color: var(--gold);
            text-shadow: 0 0 15px var(--gold), 0 0 25px #fff;
            transform: scale(1.3);
            opacity: 1;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="port-container">
        <h1 id="logo">PURE</h1>
        <input type="text" id="omni-input" placeholder="Who What When Where Why How..." autofocus>
    </div>

    <div class="assets-grid" id="asset-display">
        </div>

    <script>
        const input = document.getElementById('omni-input');
        const logo = document.getElementById('logo');
        const assetDisplay = document.getElementById('asset-display');

        // 正式名称と略称を含む34資産の定義
        const assetList = ["PURE", "ARCHE", "LOGOS", "LOGIC", "RATIO", "SOL", "SILENCE", "00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33"];

        // 資産表示の初期化
        assetList.forEach(name => {
            const span = document.createElement('span');
            span.className = 'asset-item';
            span.id = `asset-${name}`;
            span.textContent = name;
            assetDisplay.appendChild(span);
        });

        // --- 司令塔の送信ロジック ---
        input.addEventListener('keypress', function (e) {
            if (e.key === 'Enter' && this.value.trim() !== '') {
                const val = this.value.toUpperCase();
                
                // PortAと同様に他ポートへ射出
                const syncData = { time: new Date().toLocaleString(), action: val, id: Date.now() };
                localStorage.setItem('PURE_TRADE_SYNC', JSON.stringify(syncData));

                // 黄金比の振動（視覚的フィードバック）
                logo.style.textShadow = "0 0 30px #ffffff";
                logo.style.transform = "scale(1.1)";
                
                processResonance(val); // 自己共鳴

                setTimeout(() => {
                    logo.style.textShadow = "0 0 10px rgba(212, 175, 55, 0.5)";
                    logo.style.transform = "scale(1.0)";
                    this.value = '';
                }, 500);
            }
        });

        // --- 同期回路：PortA等からの信号を監視 ---
        let lastId = null;
        setInterval(() => {
            const rawData = localStorage.getItem('PURE_TRADE_SYNC');
            if (rawData) {
                const data = JSON.parse(rawData);
                if (data.id !== lastId) {
                    processResonance(data.action);
                    lastId = data.id;
                }
            }
        }, 500);

        // 共鳴（Resonance）の執行
        function processResonance(cmd) {
            assetList.forEach(name => {
                const target = document.getElementById(`asset-${name}`);
                if (cmd.includes(name)) {
                    target.classList.add('resonate');
                    setTimeout(() => target.classList.remove('resonate'), 4000);
                }
            });
        }
    </script>
</body>
</html>
